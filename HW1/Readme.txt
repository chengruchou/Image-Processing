影像處理作業1：彩色影像直方圖均衡化實作說明報告  
學號：E24104294  姓名：周承儒 
日期：2025年3月13日

【作業簡介】  
直方圖均衡化是一種常見的影像對比度增強技術，其主要原理在於調整影像中各灰階值的出現頻率，使整體亮度分佈更均勻，
從而提高影像細節表現。然而，對彩色影像直接均衡化容易破壞原有色彩平衡，因此本作業採用將彩色影像轉換至 HSV 色彩空間，
僅對 V（亮度）通道進行均衡化處理，以保留 H（色相）與 S（飽和度）資訊。

【作業要求】  
1. 演算法實作：  
   - 實作直方圖均衡化演算法於彩色影像中（提示：先將影像轉換至 HSV 色彩空間，再僅處理 V 通道）。  
   - 均衡化過程中不得使用 OpenCV 的內建函式（如 cv2.equalizeHist）或 MATLAB 內建函式。

2. 輸出文件：  
   - input.png：原始彩色影像。  
   - output.png：經直方圖均衡化後的影像。  
   - 2d_histogram.png：顯示 H 與 S 通道 2D 直方圖。  
   - result.png：比較原始影像與均衡化後影像灰階機率密度函數（PDF）的圖表。  
   - 說明報告（PDF 格式）。


【實作原理與演算法說明】  
1. 色彩空間轉換：  
   將影像從 BGR 色彩空間轉換至 HSV 色彩空間，分離出 H（色相）、S（飽和度）及 V（亮度）三個通道。
   由於 V 通道代表影像亮度，是調整對比度的主要依據，故後續均衡化僅針對 V 通道進行處理。

2. V 通道直方圖均衡化：  
   - 統計 V 通道中各像素值（0~255）的出現次數，得到直方圖。  
   - 根據直方圖計算累積分布函數（CDF），了解各灰階值的累計機率。  
   - 將 CDF 正規化到 0~255 的範圍，形成查找表，用以重新分配像素值。  
   - 利用查找表對原始 V 通道像素值進行映射，達到提升影像對比度的效果。

3. 影像重建：  
   將均衡化後的 V 通道與原始 H、S 通道合併，再轉換回 BGR 色彩空間，生成最終均衡化影像。

4. 2D 直方圖說明：  
   利用 2D 直方圖展示影像中 H 與 S 通道的聯合分佈：  
   - 橫軸（色相）：表示像素的色相值，通常範圍為 0 至 180。  
   - 縱軸（飽和度）：表示像素的飽和度值，通常範圍為 0 至 256。  

【結果與討論】  
實驗結果顯示：  
- 均衡化後影像的對比度明顯提升，細節更為豐富；由於僅調整 V 通道，原始色彩資訊基本得以保留。  
- 灰階 PDF 比較：將原始影像與均衡化後影像轉換為灰階後，各自計算機率密度函數（PDF），可見均衡化後影像的灰階分佈較為平滑且均勻，反映出亮度分佈的改善。  
- 2D 直方圖展示了 H 與 S 通道的聯合分佈，有助於了解影像中主要色彩及飽和度的分佈情況。

【結論】  
本作業通過將彩色影像從 BGR 轉換至 HSV 色彩空間，僅對 V 通道進行直方圖均衡化處理，不僅有效提升影像對比度，
同時保留了原始色彩資訊。從實驗結果看，均衡化後影像的細節更清晰、亮度分佈更均勻，而 2D 直方圖則直觀反映了影像在色彩空間中的特性。
該方法具有實際應用價值，適用於影像質量提升及後續影像處理工作。
